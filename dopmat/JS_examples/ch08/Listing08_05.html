<!DOCTYPE HTML>
<html>
<head>
<title>Листинг 8.5</title>
<!-- Начало сценария -->
<script type="text/javascript">
   // Переменные для записи ссылок на объекты:
   var pict,cnv,ctx
   // Массив с названиями файлов:
   var files=["fox.jpg","raccoon.jpg","wolf.jpg"]
   // Массив с текстовыми подписями:
   var text=["Это лиса","Это енот","Это волк"]
   // Переменная с указанием пути к графическим файлам:
   var path="../images/"
   // Индекс выбранного изображения:
   var sld=0
   // Обработчик события, связанного с загрузкой документа:
   window.onload=function(){
      // Создание объекта изображения:
      pict=new Image()
      // Получение ссылки на объект графической области:
      cnv=document.getElementById("mycanvas")
      // Всплывающая подсказка для графической области:
      cnv.title="Щелкните мышью для просмотра\nследующего изображения"
      // Ссылка на объект графического контекста:
      ctx=cnv.getContext("2d")
      // Размер и тип шрифта:
      ctx.font="30px Arial"
      // Вызов функции, выполняющей заливку графической
      // области и рисование текста:
      set()
      // Обработчик события, связанного с загрузкой
      // изображения из файла:
      pict.onload=function(){
         // Рисование изображения:
         ctx.drawImage(pict,15,15)
      }
      // Обработка события, связанного со щелчком мышью
      // в графической области:
      cnv.onclick=function(){
         // Новое значение для индекса
         // выбранного изображения:
         sld=(sld+1)%(files.length)
         // Вызов функции, выполняющей заливку графической
         // области и рисование текста:
         set()
      }
   }
   // Функция для заливки графической области и рисования
   // текста:
   function set(){
      // Желтый цвет заливки:
      ctx.fillStyle="yellow"
      // Заливка графической области желтым цветом:
      ctx.fillRect(0,0,cnv.width,cnv.height)
      // Синий цвет заливки:
      ctx.fillStyle="blue"
      // Ссылка на файл с изображением:
      pict.src=path+files[sld]
      // Рисование текста в графической области:
      ctx.fillText(text[sld],40,230)
   }
</script>
<!-- Завершение сценария -->
</head>
<body>
   <h3>Листинг 8.5</h3><hr>
   <!-- Графическая область -->
   <canvas height="250" width="215" id="mycanvas" style="border:3px solid #0000ff;"></canvas>
</body>
</html>